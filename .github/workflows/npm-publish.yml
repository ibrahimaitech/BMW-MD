eyJub2lzZUtleSI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoicU1IY2tuNzVWSkdNQUorYUZZZ0kvbGVGcmF2TzcyVUZnVlBKeXpZYkswaz0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiaDNjdWpSYUhRZko3UVpKOVlJdTNhdDBkeXhPaWxsZWNzaXY5MFFwUlZDdz0ifX0sInBhaXJpbmdFcGhlbWVyYWxLZXlQYWlyIjp7InByaXZhdGUiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiI0TTd0WGVGOFhnTnpYUC96elhIeTMxNnQxRTFjRmg5QnhrbHN2aTVaZjM4PSJ9LCJwdWJsaWMiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJ4UjczTzVUb1FWNkpDSEkwNGF4YlVxaS94dWZaTVVHRlZTYWNVdG16eTN3PSJ9fSwic2lnbmVkSWRlbnRpdHlLZXkiOnsicHJpdmF0ZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IkNDa2ZBYlpXMWk1cXlHUkZXRk9OdGxCSWEzT3ZJN2lxNzFYR05GTEo0Rnc9In0sInB1YmxpYyI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6IitIMjN4bVZBam9PcDIwcmJEWWdlazFjQTVGUTh5V3gzb2RmRi8zc01nSFk9In19LCJzaWduZWRQcmVLZXkiOnsia2V5UGFpciI6eyJwcml2YXRlIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiWUtqSlI4c05qNUhRc0t3VnkyeUduRE1YTXlDYmxlcXRRejRpdEJvaFYwST0ifSwicHVibGljIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiWlRENEZlWHVKNWRSZjRxbkM3dEJSQUk1S0FSZ1B2b0Rpd2wwRXRLeFIyMD0ifX0sInNpZ25hdHVyZSI6eyJ0eXBlIjoiQnVmZmVyIiwiZGF0YSI6ImFrRFBTbnBzNEZYTWQ4UE85MktFMVhmbnMwWFBKNzBuRnArRUZkZTRPMUZ4OTg0ZUdabGE3elRUdCtISDFmUTJUNlpmVUo4NHdQempxVXhReEZnZENRPT0ifSwia2V5SWQiOjF9LCJyZWdpc3RyYXRpb25JZCI6MjUxLCJhZHZTZWNyZXRLZXkiOiJoUWhVRGZxdDFSNXh3UVVaRENJM292NWswYjF5WmhGZjVQc3RnMUNKMDFvPSIsInByb2Nlc3NlZEhpc3RvcnlNZXNzYWdlcyI6W10sIm5leHRQcmVLZXlJZCI6MzEsImZpcnN0VW51cGxvYWRlZFByZUtleUlkIjozMSwiYWNjb3VudFN5bmNDb3VudGVyIjowLCJhY2NvdW50U2V0dGluZ3MiOnsidW5hcmNoaXZlQ2hhdHMiOmZhbHNlfSwiZGV2aWNlSWQiOiJaZHVGMS1XSVJNU1NUR0JIRUtpT013IiwicGhvbmVJZCI6ImQxZTc4NTQzLTJjODctNDlmMy05ZWM0LTZhMThlMTU3YjBhNiIsImlkZW50aXR5SWQiOnsidHlwZSI6IkJ1ZmZlciIsImRhdGEiOiJRUTQ3bzgyaGk1Mk9aTjBDeUd4Q3pjMDRab1E9In0sInJlZ2lzdGVyZWQiOnRydWUsImJhY2t1cFRva2VuIjp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoieVRXRG1YbzZmSXFQdlNXV014NmtmbzZ1WXJBPSJ9LCJyZWdpc3RyYXRpb24iOnt9LCJwYWlyaW5nQ29kZSI6IkpGSk02SFZLIiwibWUiOnsiaWQiOiIyNTQ3MDgzNDM2NTc6NUBzLndoYXRzYXBwLm5ldCIsIm5hbWUiOiJzaGV0YW5pIG5pIGZpc2kifSwiYWNjb3VudCI6eyJkZXRhaWxzIjoiQ04yMWp0Z0ZFS2ZGOUxRR0dBUWdBQ2dBIiwiYWNjb3VudFNpZ25hdHVyZUtleSI6IlNodTJxbXpIWHZtcmQrdEhwdldiU1RvRlRpSTZzQ3Flcjk3TGtqQkRtUk09IiwiYWNjb3VudFNpZ25hdHVyZSI6IkdZNFJweFNDQnJIZjRwOUo5UlZlaElXRFBXd25xSGhNRU5neFU1VGNEbVRvZUZGYS9STDZCa3ZsRFRFSHNrYVMwY1F4TVZWdUJRS24zcnVZL08yOEFRPT0iLCJkZXZpY2VTaWduYXR1cmUiOiJpd3lIRFppQmkzQWVxeXNEaHFiWVpDYjhRWER6VFFaVmhFMm9ybyswb092ZUk5ejkyVW1Hb1NYU3ozcURWc3RydDlRQy9jSVM0Wkd1TUQvUTBNSStEQT09In0sInNpZ25hbElkZW50aXRpZXMiOlt7ImlkZW50aWZpZXIiOnsibmFtZSI6IjI1NDcwODM0MzY1Nzo1QHMud2hhdHNhcHAubmV0IiwiZGV2aWNlSWQiOjB9LCJpZGVudGlmaWVyS2V5Ijp7InR5cGUiOiJCdWZmZXIiLCJkYXRhIjoiQlVvYnRxcHN4MTc1cTNmclI2YjFtMGs2QlU0aU9yQXFucS9leTVJd1E1a1QifX1dLCJwbGF0Zm9ybSI6InNtYmEiLCJsYXN0QWNjb3VudFN5bmNUaW1lc3RhbXAiOjE3MjE1NzQwNjgsIm15QXBwU3RhdGVLZXlJZCI6IkFBQUFBSkVMIn0=

name: Node.js Package

on:
  release:
    types: [created]

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: 16
      - run: npm ci
      - run: npm test

  publish-npm:
    needs: build
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-node@v3
        with:
          node-version: 16
          registry-url: https://registry.npmjs.org/
      - run: npm ci
      - run: npm publish
        env:
          NODE_AUTH_TOKEN: ${{secrets.npm_token}}
